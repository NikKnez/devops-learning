# Labs 41-53


## Lab 41: Change the Original Repository

## Goals

    Make some changes to the original repository so we can try to pull the changes

## Make a change in the original hello repository
Execute:

cd ../hello

# (You should be in the original hello repository now)

NOTE: Now in the hello repo

Make the following changes to README:
README

This is the Hello World example from the git tutorial.
(changed in original)

Now add and commit this change
Execute:

git add README

git commit -m "Changed README in original repo"

## Up Next

The original repository now has later changes that are not in the cloned version. Next we will pull those changes across to the cloned repository.


## Lab 42: Fetching Changes

## Goals

    Learn how to pull changes from a remote repository.

Execute:

cd ../cloned_hello

git fetch

git hist --all

NOTE: Now in the cloned_hello repo
Output:

$ git fetch
From /Users/jim/Downloads/git_tutorial/work/hello
   5f626c6..5e2d55e  main       -> origin/main
$ git hist --all
* 5e2d55e 2023-06-10 | Changed README in original repo (origin/main, origin/HEAD) [Jim Weirich]
* 5f626c6 2023-06-10 | Updated Rakefile (HEAD -> main, origin/greet) [Jim Weirich]
* 24d82d4 2023-06-10 | Hello uses Greeter [Jim Weirich]
* 619f552 2023-06-10 | Added greeter class [Jim Weirich]
* 976950b 2023-06-10 | Added README [Jim Weirich]
* cdceefa 2023-06-10 | Added a Rakefile. [Jim Weirich]
* 22273f2 2023-06-10 | Moved hello.rb to lib [Jim Weirich]
* 186488e 2023-06-10 | Add an author/email comment [Jim Weirich]
* e4e3645 2023-06-10 | Added a comment (tag: v1) [Jim Weirich]
* a6b268e 2023-06-10 | Added a default value (tag: v1-beta) [Jim Weirich]
* 174dfab 2023-06-10 | Using ARGV [Jim Weirich]
* f7c41d3 2023-06-10 | First Commit [Jim Weirich]

At this point the repository has all the commits from the original repository, but they are not integrated into the cloned repository’s local branches.

Find the “Changed README in original repo” commit in the history above. Notice that the commit includes “origin/main” and “origin/HEAD”.

Now look at the “Updated Rakefile” commit. You will see that the local main branch points to this commit, not to the new commit that we just fetched.

The upshot of this is that the “git fetch” command will fetch new commits from the remote repository, but it will not merge these commits into the local branches.

## Check the README

We can demonstrate that the cloned README is unchanged.
Execute:

cat README

Output:

$ cat README
This is the Hello World example from the git tutorial.

See, no changes.


## Lab 43: Merging Pulled Changes

## Goals

    Learn to get the pulled changes into the current branch and working directory.

## Merge the fetched changes into local main
Execute:

git merge origin/main

Output:

$ git merge origin/main
Updating 5f626c6..5e2d55e
Fast-forward
 README | 1 +
 1 file changed, 1 insertion(+)

## Check the README again

We should see the changes now.
Execute:

cat README

Output:

$ cat README
This is the Hello World example from the git tutorial.
(changed in original)

There are the changes. Even though “git fetch” does not merge the changes, we can still manually merge the changes from the remote repository.

## Up Next

Next let’s take a look at combining the fetch & merge process into a single command.


## Lab 44: Pulling Changes

## Goals

    Learn that git pull is equivalent to a git fetch followed by a git merge.

## Discussion

We’re not going to go through the process of creating another change and pulling it again, but we do want you to know that doing:

git pull

is indeed equivalent to the two steps:

git fetch

git merge origin/main


## Lab 45: Adding a Tracking Branch

## Goals

    Learn how to add a local branch that tracks a remote branch.

The branches starting with remotes/origin are branches from the original repo. Notice that you don’t have a branch called greet anymore, but it knows that the original repo had a greet branch.

## Add a local branch that tracks a remote branch.
Execute:

git branch --track greet origin/greet

git branch -a

git hist --max-count=2

Output:

$ git branch --track greet origin/greet
Branch 'greet' set up to track remote branch 'greet' from 'origin'.
$ git branch -a
  greet
* main
  remotes/origin/HEAD -> origin/main
  remotes/origin/greet
  remotes/origin/main
$ git hist --max-count=2
* 5e2d55e 2023-06-10 | Changed README in original repo (HEAD -> main, origin/main, origin/HEAD) [Jim Weirich]
* 5f626c6 2023-06-10 | Updated Rakefile (origin/greet, greet) [Jim Weirich]

We can now see the greet branch in the branch list and in the log. 


## Lab 46: Bare Repositories

## Goals

    Learn how to create bare repositories.

Bare repositories (without working directories) are usually used for sharing.

## Create a bare repository.
Execute:

cd ..

git clone --bare hello hello.git

ls hello.git

NOTE: Now in the work directory
Output:

$ git clone --bare hello hello.git
Cloning into bare repository 'hello.git'...
done.
$ ls hello.git
HEAD
config
description
hooks
info
objects
packed-refs
refs

The convention is that repositories ending in ‘.git’ are bare repositories. We can see that there is no working directory in the hello.git repo. Essentially it is nothing but the .git directory of a non-bare repo.


## Lab 47: Adding a Remote Repository

## Goals

    Add the bare repository as a remote to our original repository.

Let’s add the hello.git repo to our original repo.
Execute:

cd hello

git remote add shared ../hello.git

NOTE: Now in the hello repository.


## Lab 48: Pushing a Change

## Goals

    Learn how to push a change to a remote repository.

Since bare repositories are usually shared on some sort of network server, it is usually difficult to cd into the repo and pull changes. So we need to push our changes into other repositories.

Let’s start by creating a change to be pushed. Edit the README and commit it
README

This is the Hello World example from the git tutorial.
(Changed in the original and pushed to shared)

Execute:

git checkout main

git add README

git commit -m "Added shared comment to readme"

Now push the change to the shared repo.
Execute:

git push shared main

shared is the name of the repository receiving the changes we are pushing. (Remember, we added it as a remote in the previous lab.)
Output:

$ git push shared main
To ../hello.git
   5e2d55e..7b4a53a  main -> main

NOTE: We had to explicitly name the branch main that was receiving the push. It is possible to set it up automatically, but I never remember the commands to do that. Check out the “Git Remote Branch” gem for easy management of remote branches.


## Lab 49: Pulling Shared Changes

## Goals

    Learn how to pull changes from a shared repository.

Quick hop over to the clone repository and let’s pull down the changes just pushed to the shared repo.
Execute:

cd ../cloned_hello

NOTE: Now in the cloned_hello repo.

Continue with…
Execute:

git remote add shared ../hello.git

git branch --track shared main

git pull shared main

cat README


## Lab 50: Hosting your Git Repositories

## Goals

    Learn how to setup git server for sharing repositories.

There are many ways to share git repositories over the network. Here is a quick and dirty way.

## Start up the git server
Execute:

# (From the work directory)

git daemon --verbose --export-all --base-path=.

Now, in a separate terminal window, go to your work directory
Execute:

# (From the work directory)

git clone git://localhost/hello.git network_hello

cd network_hello

ls

You should see a copy of hello project.

## Pushing to the Git Daemon

If you want to push to the git daemon repository, add --enable=receive-pack to the git daemon command. Be careful because there is no authentication on this server, anyone could push to your repository.


## Lab 51: Sharing Repos

## Goals

    Learn to share repos across WIFI.

See if your neighbor is running the git daemon. Exchange IP addresses and see if you can pull from each other’s repositories.

NOTE: The gitjour gem is really useful in sharing ad-hoc repositories.


## Lab 52: Advanced / Future Topics

Here are some topics you might want to research on your own:

    Protocols
    SSH Setup
    Remote Branch Management
    Finding Buggy Commits (git bisect)
    Workflows
    Non-command line tools (gitx, gitk, magit)
    Working with GitHub


## Lab 53: Thank You
Thank you for trying out the Git Immersion Labs. Feel free to send comments to jim.weirich@gmail.com.
